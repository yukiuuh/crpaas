<form clrForm class="clr-form clr-form-full-width" (ngSubmit)="onSubmit()" #repoForm="ngForm">
  <!-- Error Message Display -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper"><cds-icon class="alert-icon" shape="error-standard"></cds-icon></div>
        <span class="alert-text">{{ errorMessage }}</span>
      </div>
    </div>
  </div>
  <clr-input-container>
    <label for="repo_url" class="clr-required-mark">Repository URL</label>
    <input type="text" id="repo_url" name="repo_url" [(ngModel)]="model.repo_url" clrInput required
      pattern="^((https?|git):\/\/.+?|git@.+?:.+?)\.git$"
      placeholder="e.g., https://github.com/user/repo.git">
    <clr-control-helper>Must be a valid Git URL ending in .git (https://..., git://..., or git&#64;...)</clr-control-helper>
    <clr-control-error>Invalid format. Must be a valid Git URL</clr-control-error>
  </clr-input-container>
  <clr-input-container>
    <label for="commit_id" class="clr-required-mark">Branch / Commit ID</label>
    <input type="text" id="commit_id" name="commit_id" [(ngModel)]="model.commit_id" clrInput required
      pattern="^(?!.*\.\.)(?!\/|.*\/$)(?!.*@\{)[^ ~^:?*\[\\]+(?<!\.)$"
      placeholder="e.g., main, v1.0.0, or a1b2c3d">
    <clr-control-helper>Must be a valid commit id or branch name.</clr-control-helper>
    <clr-control-error>Invalid format. Cannot contain spaces, .., ~, ^, :, etc.</clr-control-error>
  </clr-input-container>
  <clr-input-container>
    <label for="project_name">Project Name (Optional)</label>
    <input type="text" id="project_name" name="project_name" [(ngModel)]="model.project_name" clrInput 
      pattern="^[a-z0-9]([-a-z0-9]*[a-z0-9])?$" 
      placeholder="Custom name for OpenGrok project" />
    <clr-control-helper>Must be lowercase alphanumeric with hyphens.</clr-control-helper>
    <clr-control-error>Invalid format. Use lowercase letters, numbers, and hyphens.</clr-control-error>
  </clr-input-container>
  <clr-input-container>
    <label for="retention_days">Retention Period (days)</label>
    <input type="number" id="retention_days" name="retention_days" [(ngModel)]="model.retention_days" clrInput min="0">
    <clr-control-helper>Enter 0 for disable retention.</clr-control-helper>
  </clr-input-container>
  <clr-checkbox-container>
    <label>Clone Options</label>
    <clr-checkbox-wrapper>
      <input type="checkbox" clrCheckbox name="clone_single_branch" [(ngModel)]="model.clone_single_branch" />
      <label>Single branch clone (faster for large repos)</label>
    </clr-checkbox-wrapper>
    <clr-checkbox-wrapper>
      <input type="checkbox" clrCheckbox name="clone_recursive" [(ngModel)]="model.clone_recursive" />
      <label>Clone submodules recursively</label>
    </clr-checkbox-wrapper>
    <clr-control-helper>These options only apply when adding a new repository.</clr-control-helper>
  </clr-checkbox-container>
  <clr-toggle-container>
    <label>Enable Daily Auto-Sync</label>
    <clr-toggle-wrapper>
      <input type="checkbox" clrToggle name="auto_sync_enabled" [(ngModel)]="model.auto_sync_enabled" />
    </clr-toggle-wrapper>
  </clr-toggle-container>
  <clr-input-container [class.clr-form-control-disabled]="!model.auto_sync_enabled">
    <label for="auto_sync_schedule">Sync Time (UTC)</label>
    <input type="time" id="auto_sync_schedule" name="auto_sync_schedule" [(ngModel)]="model.auto_sync_schedule"
      clrInput [disabled]="!model.auto_sync_enabled" required />
  </clr-input-container>
</form>